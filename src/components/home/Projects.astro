---
import Section from "../ui/Section.astro";
import { Image } from "astro:assets";
import Button from "../ui/Button.astro";

// Validated image paths
import malagaImg from "../../assets/images/projects/beach-house-malaga/herov2.webp";
import antwerpenImg from "../../assets/images/projects/country-estate-antwerpen/herov3.webp";
import barcelonaImg from "../../assets/images/projects/duplex-penthouse-barcelona/herov2.webp";
import dubaiImg from "../../assets/images/projects/penthouse-dubai-marina/herov2.webp";
import nlImg from "../../assets/images/projects/villa-mansion-netherlands/herov2.webp";

const projects = [
    {
        title: "Penthouse Marina",
        location: "Dubai",
        image: dubaiImg,
        href: "/projects/dubai-marina",
    },
    {
        title: "Beach House",
        location: "Malaga",
        image: malagaImg,
        href: "/projects/malaga",
    },
    {
        title: "Country Estate",
        location: "Antwerpen",
        image: antwerpenImg,
        href: "/projects/antwerpen",
    },
    {
        title: "Duplex Penthouse",
        location: "Barcelona",
        image: barcelonaImg,
        href: "/projects/barcelona",
    },
    {
        title: "Villa Mansion",
        location: "Netherlands",
        image: nlImg,
        href: "/projects/netherlands",
    },
];

const { limit } = Astro.props;
const projectsData = projects.slice(0, limit || projects.length);
---

<Section id="projects" variant="default">
    <div class="flex flex-col md:flex-row justify-between items-end mb-16">
        <div class="reveal">
            <h2 class="text-4xl md:text-5xl font-heading mb-4">
                Selected <span class="text-brand-gold italic">Works</span>
            </h2>
            <p class="text-brand-text/60 max-w-sm">
                A curation of international residences defining the new standard
                of luxury.
            </p>
        </div>
        <div class="reveal mt-8 md:mt-0">
            <Button href="/projects" variant="ghost">View All Projects</Button>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {
            projectsData.map((project, index) => (
                <a
                    href={project.href}
                    class="group block relative overflow-hidden aspect-[4/5] reveal"
                >
                    <div class="absolute inset-0 z-10 bg-brand-black/20 group-hover:bg-brand-black/0 transition-colors duration-500" />

                    {/* Image */}
                    <Image
                        src={project.image}
                        alt={`${project.title} - ${project.location} luxury interior design project showcase`}
                        width={800}
                        height={1000}
                        loading="lazy"
                        decoding="async"
                        class="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105"
                    />

                    {/* Content Overlay */}
                    <div class="absolute inset-0 z-20 p-8 flex flex-col justify-between opacity-100 md:opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-brand-black/90 via-transparent to-transparent">
                        <div class="translate-y-[-20px] group-hover:translate-y-0 transition-transform duration-500">
                            <p class="text-xs font-bold uppercase tracking-widest text-brand-gold mb-2">
                                {project.location}
                            </p>
                            <h3 class="text-2xl font-heading text-white">
                                {project.title}
                            </h3>
                        </div>

                        <div class="translate-y-[20px] group-hover:translate-y-0 transition-transform duration-500">
                            <span class="inline-block border-b border-brand-gold text-xs uppercase tracking-widest pb-1 text-brand-text">
                                View Case
                            </span>
                        </div>
                    </div>
                </a>
            ))
        }
    </div>
</Section>
