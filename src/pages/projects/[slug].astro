---
import Layout from "../../layouts/Layout.astro";
import Section from "../../components/ui/Section.astro";
import Button from "../../components/ui/Button.astro";
import { Image } from "astro:assets";

// Asset Imports
// Malaga
import malagaHero from "../../assets/images/projects/beach-house-malaga/herov2.webp";
import malaga1 from "../../assets/images/projects/beach-house-malaga/upscalemedia-transformed(5).webp";
import malaga2 from "../../assets/images/projects/beach-house-malaga/upscalemedia-transformed(6).webp";
import malaga3 from "../../assets/images/projects/beach-house-malaga/upscalemedia-transformed(9).webp";
import malaga4 from "../../assets/images/projects/beach-house-malaga/upscalemedia-transformed(7).webp";
import malaga5 from "../../assets/images/projects/beach-house-malaga/upscalemedia-transformed(8).webp";

// Antwerpen
import antwerpenHero from "../../assets/images/projects/country-estate-antwerpen/herov3.webp";
import antwerpen1 from "../../assets/images/projects/country-estate-antwerpen/upscalemedia-transformed(10).webp";
import antwerpen2 from "../../assets/images/projects/country-estate-antwerpen/upscalemedia-transformed(11).webp";
import antwerpen3 from "../../assets/images/projects/country-estate-antwerpen/upscalemedia-transformed(12).webp";
import antwerpen4 from "../../assets/images/projects/country-estate-antwerpen/upscalemedia-transformed(14).webp";
import antwerpen5 from "../../assets/images/projects/country-estate-antwerpen/upscalemedia-transformed(15).webp";

// Barcelona
import barcelonaHero from "../../assets/images/projects/duplex-penthouse-barcelona/herov2.webp";
import barcelona1 from "../../assets/images/projects/duplex-penthouse-barcelona/upscalemedia-transformed(11).webp";
import barcelona2 from "../../assets/images/projects/duplex-penthouse-barcelona/upscalemedia-transformed(12).webp";
import barcelona3 from "../../assets/images/projects/duplex-penthouse-barcelona/upscalemedia-transformed(13).webp";
import barcelona4 from "../../assets/images/projects/duplex-penthouse-barcelona/upscalemedia-transformed(15).webp";

// Dubai
import dubaiHero from "../../assets/images/projects/penthouse-dubai-marina/herov2.webp";
import dubai1 from "../../assets/images/projects/penthouse-dubai-marina/upscalemedia-transformed(4).webp";
import dubai2 from "../../assets/images/projects/penthouse-dubai-marina/upscalemedia-transformed(5).webp";
import dubai3 from "../../assets/images/projects/penthouse-dubai-marina/upscalemedia-transformed(6).webp";
import dubai4 from "../../assets/images/projects/penthouse-dubai-marina/upscalemedia-transformed(7).webp";
import dubai5 from "../../assets/images/projects/penthouse-dubai-marina/upscalemedia-transformed(8).webp";

// Netherlands
import nlHero from "../../assets/images/projects/villa-mansion-netherlands/herov2.webp";
import nl1 from "../../assets/images/projects/villa-mansion-netherlands/upscalemedia-transformed(4).webp";
import nl2 from "../../assets/images/projects/villa-mansion-netherlands/upscalemedia-transformed(5).webp";
import nl3 from "../../assets/images/projects/villa-mansion-netherlands/upscalemedia-transformed(6).webp";
import nl4 from "../../assets/images/projects/villa-mansion-netherlands/upscalemedia-transformed(7).webp";
import nl5 from "../../assets/images/projects/villa-mansion-netherlands/upscalemedia-transformed(8).webp";

export async function getStaticPaths() {
    const projects = [
        {
            slug: "dubai-marina",
            title: "Penthouse Marina",
            location: "Dubai, UAE",
            service: "Interior Design & Realisation",
            year: "2025",
            description:
                "A gravity-defying penthouse overlooking the marina. We stripped the space to its core to introduce a palette of dark velvet, brushed bronze, and Italian marble. The result is a cinematic sanctuary above the clouds.",
            hero: "dubaiHero", // Key to map below
            gallery: ["dubai1", "dubai2", "dubai3", "dubai4", "dubai5"],
        },
        {
            slug: "malaga",
            title: "Beach House",
            location: "Malaga, Spain",
            service: "Architecture & Interior",
            year: "2024",
            description:
                "Where the Mediterranean meets metropolitan luxury. This beach house redefines coastal living by rejecting traditional white-washed aesthetics in favor of deep, cool tones that provide respite from the Spanish sun.",
            hero: "malagaHero",
            gallery: ["malaga1", "malaga2", "malaga3", "malaga4", "malaga5"],
        },
        {
            slug: "antwerpen",
            title: "Country Estate",
            location: "Antwerpen, Belgium",
            service: "Full Renovation",
            year: "2024",
            description:
                "A historic estate reimagined for modern luxury. We preserved the original architectural soul while injecting a bold, contemporary darkness that highlights the volume and grandeur of the spaces.",
            hero: "antwerpenHero",
            gallery: [
                "antwerpen1",
                "antwerpen2",
                "antwerpen3",
                "antwerpen4",
                "antwerpen5",
            ],
        },
        {
            slug: "barcelona",
            title: "Duplex Penthouse",
            location: "Barcelona, Spain",
            service: "Interior Design",
            year: "2023",
            description:
                "Urban sophistication in the heart of Catalonia. This duplex utilizes a stark, high-contrast palette to frame the vibrant city views, creating a gallery-like atmosphere for the owner's art collection.",
            hero: "barcelonaHero",
            gallery: ["barcelona1", "barcelona2", "barcelona3", "barcelona4"],
        },
        {
            slug: "netherlands",
            title: "Villa Mansion",
            location: "The Netherlands",
            service: "New Build",
            year: "2025",
            description:
                "A monumental new construction project where we defined every detail from the architectural shell to the custom furniture joinery. The definition of turnkey luxury.",
            hero: "nlHero",
            gallery: ["nl1", "nl2", "nl3", "nl4", "nl5"],
        },
    ];

    return projects.map((project, index) => {
        const nextIndex = (index + 1) % projects.length;
        const nextProject = {
            slug: projects[nextIndex].slug,
            title: projects[nextIndex].title,
            hero: projects[nextIndex].hero,
        };
        return {
            params: { slug: project.slug },
            props: { project, nextProject },
        };
    });
}

const { project, nextProject } = Astro.props;

// Image Mapping Helper
const imageMap = {
    malagaHero,
    malaga1,
    malaga2,
    malaga3,
    malaga4,
    malaga5,
    antwerpenHero,
    antwerpen1,
    antwerpen2,
    antwerpen3,
    antwerpen4,
    antwerpen5,
    barcelonaHero,
    barcelona1,
    barcelona2,
    barcelona3,
    barcelona4,
    dubaiHero,
    dubai1,
    dubai2,
    dubai3,
    dubai4,
    dubai5,
    nlHero,
    nl1,
    nl2,
    nl3,
    nl4,
    nl5,
};

const heroImage = imageMap[project.hero];
// Safely map images, verifying they exist in the map
const galleryImages = project.gallery
    .map((key) => imageMap[key])
    .filter(Boolean);

const nextHeroImage = imageMap[nextProject.hero];
---

<Layout title={`${project.title} | By Shakir`}>
    <!-- Hero -->
    <section class="h-[80vh] w-full relative overflow-hidden bg-brand-black">
        {
            heroImage && (
                <Image
                    src={heroImage}
                    alt={`${project.title} - ${project.location} luxury interior design project`}
                    width={1920}
                    height={1080}
                    loading="eager"
                    fetchpriority="high"
                    class="absolute inset-0 w-full h-full object-cover opacity-60"
                    quality="high"
                />
            )
        }
        <div
            class="absolute inset-0 bg-gradient-to-b from-brand-black/30 via-transparent to-brand-dark"
        >
        </div>

        <div class="absolute bottom-0 left-0 w-full p-6 md:p-12 reveal">
            <div class="max-w-[1920px] mx-auto">
                <p
                    class="text-brand-gold text-sm font-bold uppercase tracking-widest mb-4"
                >
                    {project.location}
                </p>
                <h1
                    class="text-5xl md:text-8xl font-heading text-brand-text mb-8"
                >
                    {project.title}
                </h1>
            </div>
        </div>
    </section>

    <!-- Info Grid -->
    <Section variant="dark">
        <div
            class="grid grid-cols-1 md:grid-cols-4 gap-12 border-t border-brand-text/10 pt-12"
        >
            <div class="md:col-span-2">
                <h3 class="text-2xl font-heading mb-6">The Concept</h3>
                <p class="text-brand-text/70 leading-relaxed text-lg">
                    {project.description}
                </p>
            </div>
            <div>
                <h4
                    class="text-xs font-bold uppercase tracking-widest text-brand-gold mb-4"
                >
                    Service
                </h4>
                <p class="text-brand-text/80">{project.service}</p>
            </div>
            <div>
                <h4
                    class="text-xs font-bold uppercase tracking-widest text-brand-gold mb-4"
                >
                    Year
                </h4>
                <p class="text-brand-text/80">{project.year}</p>
            </div>
        </div>
    </Section>

    <!-- Gallery -->
    <Section variant="default" class="pt-0">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {
                galleryImages.map((img, index) => {
                    const isWide = index % 3 === 0;
                    return (
                        <div
                            class={`reveal overflow-hidden relative group ${isWide ? "md:col-span-2 aspect-[16/9]" : "aspect-[4/5]"}`}
                        >
                            <Image
                                src={img}
                                alt={`${project.title} interior detail - ${project.location} - view ${index + 1}`}
                                width={isWide ? 1600 : 800}
                                height={isWide ? 900 : 1000}
                                loading="lazy"
                                decoding="async"
                                class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105"
                            />
                        </div>
                    );
                })
            }
        </div>
    </Section>

    <!-- Navigation -->
    <a
        href={`/projects/${nextProject.slug}`}
        class="group relative block w-full h-[60vh] overflow-hidden"
    >
        {
            nextHeroImage && (
                <Image
                    src={nextHeroImage}
                    alt={`Next project - ${nextProject.title} luxury interior design`}
                    width={1920}
                    height={1080}
                    loading="lazy"
                    decoding="async"
                    class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-60 group-hover:opacity-40"
                />
            )
        }
        <div
            class="absolute inset-0 bg-brand-black/20 group-hover:bg-brand-black/40 transition-colors duration-500"
        >
        </div>

        <div
            class="absolute inset-0 flex flex-col items-center justify-center z-10 text-center"
        >
            <span
                class="text-brand-gold text-sm font-bold uppercase tracking-[0.2em] mb-4 opacity-80 group-hover:opacity-100 transition-opacity"
            >
                Next Project
            </span>
            <h2
                class="text-4xl md:text-6xl font-heading text-white group-hover:text-brand-gold transition-colors duration-300"
            >
                {nextProject.title}
            </h2>
            <div
                class="mt-8 opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-500 delay-100"
            >
                <span
                    class="inline-flex items-center text-white uppercase tracking-widest text-xs font-bold border-b border-white pb-1"
                >
                    View Project
                </span>
            </div>
        </div>
    </a>
</Layout>
